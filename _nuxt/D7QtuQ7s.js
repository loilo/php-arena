var k=Object.defineProperty;var l=(n,r)=>k(n,"name",{value:r,configurable:!0});try{self["workbox:window:7.0.0"]&&_()}catch{}function j(n,r){return new Promise(function(t){var i=new MessageChannel;i.port1.onmessage=function(c){t(c.data)},n.postMessage(r,[i.port2])})}l(j,"n");function L(n){var r=function(t,i){if(typeof t!="object"||!t)return t;var c=t[Symbol.toPrimitive];if(c!==void 0){var d=c.call(t,i);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n,"string");return typeof r=="symbol"?r:r+""}l(L,"t");function O(n,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,L(i.key),i)}}l(O,"r");function E(n,r){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},E(n,r)}l(E,"e");function S(n,r){(r==null||r>n.length)&&(r=n.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=n[t];return i}l(S,"i");function x(n,r){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(c,d){if(c){if(typeof c=="string")return S(c,d);var h=Object.prototype.toString.call(c).slice(8,-1);return h==="Object"&&c.constructor&&(h=c.constructor.name),h==="Map"||h==="Set"?Array.from(c):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?S(c,d):void 0}}(n))||r){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}l(x,"o");try{self["workbox:core:7.0.0"]&&_()}catch{}var b=l(function(){var n=this;this.promise=new Promise(function(r,t){n.resolve=r,n.reject=t})},"u");function P(n,r){var t=location.href;return new URL(n,t).href===new URL(r,t).href}l(P,"a");var m=l(function(n,r){this.type=n,Object.assign(this,r)},"c");function p(n,r,t){return t?r?r(n):n:(n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n)}l(p,"f");function U(){}l(U,"s");var A={type:"SKIP_WAITING"};function W(n,r){return n&&n.then?n.then(U):Promise.resolve()}l(W,"h");var R=function(n){function r(v,u){var e,o;return u===void 0&&(u={}),(e=n.call(this)||this).nn={},e.tn=0,e.rn=new b,e.en=new b,e.on=new b,e.un=0,e.an=new Set,e.cn=function(){var s=e.fn,a=s.installing;e.tn>0||!P(a.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=a,s.removeEventListener("updatefound",e.cn)):(e.hn=a,e.an.add(a),e.rn.resolve(a)),++e.tn,a.addEventListener("statechange",e.ln)},e.ln=function(s){var a=e.fn,f=s.target,g=f.state,y=f===e.vn,w={sw:f,isExternal:y,originalEvent:s};!y&&e.mn&&(w.isUpdate=!0),e.dispatchEvent(new m(g,w)),g==="installed"?e.wn=self.setTimeout(function(){g==="installed"&&a.waiting===f&&e.dispatchEvent(new m("waiting",w))},200):g==="activating"&&(clearTimeout(e.wn),y||e.en.resolve(f))},e.yn=function(s){var a=e.hn,f=a!==navigator.serviceWorker.controller;e.dispatchEvent(new m("controlling",{isExternal:f,originalEvent:s,sw:a,isUpdate:e.mn})),f||e.on.resolve(a)},e.gn=(o=l(function(s){var a=s.data,f=s.ports,g=s.source;return p(e.getSW(),function(){e.an.has(g)&&e.dispatchEvent(new m("message",{data:a,originalEvent:s,ports:f,sw:g}))})},"i"),function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{return Promise.resolve(o.apply(this,s))}catch(f){return Promise.reject(f)}}),e.sn=v,e.nn=u,navigator.serviceWorker.addEventListener("message",e.gn),e}l(r,"i");var t,i;i=n,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,E(t,i);var c,d,h=r.prototype;return h.register=function(v){var u=(v===void 0?{}:v).immediate,e=u!==void 0&&u;try{var o=this;return p(function(s,a){var f=s();return f&&f.then?f.then(a):a(f)}(function(){if(!e&&document.readyState!=="complete")return W(new Promise(function(s){return window.addEventListener("load",s)}))},function(){return o.mn=!!navigator.serviceWorker.controller,o.dn=o.pn(),p(o.bn(),function(s){o.fn=s,o.dn&&(o.hn=o.dn,o.en.resolve(o.dn),o.on.resolve(o.dn),o.dn.addEventListener("statechange",o.ln,{once:!0}));var a=o.fn.waiting;return a&&P(a.scriptURL,o.sn.toString())&&(o.hn=a,Promise.resolve().then(function(){o.dispatchEvent(new m("waiting",{sw:a,wasWaitingBeforeRegister:!0}))}).then(function(){})),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.yn),o.fn})}))}catch(s){return Promise.reject(s)}},h.update=function(){try{return this.fn?p(W(this.fn.update())):p()}catch(v){return Promise.reject(v)}},h.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},h.messageSW=function(v){try{return p(this.getSW(),function(u){return j(u,v)})}catch(u){return Promise.reject(u)}},h.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&j(this.fn.waiting,A)},h.pn=function(){var v=navigator.serviceWorker.controller;return v&&P(v.scriptURL,this.sn.toString())?v:void 0},h.bn=function(){try{var v=this;return p(function(u,e){try{var o=u()}catch(s){return e(s)}return o&&o.then?o.then(void 0,e):o}(function(){return p(navigator.serviceWorker.register(v.sn,v.nn),function(u){return v.un=performance.now(),u})},function(u){throw u}))}catch(u){return Promise.reject(u)}},c=r,(d=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&O(c.prototype,d),Object.defineProperty(c,"prototype",{writable:!1}),c}(function(){function n(){this.Pn=new Map}l(n,"n");var r=n.prototype;return r.addEventListener=function(t,i){this.jn(t).add(i)},r.removeEventListener=function(t,i){this.jn(t).delete(i)},r.dispatchEvent=function(t){t.target=this;for(var i,c=x(this.jn(t.type));!(i=c()).done;)(0,i.value)(t)},r.jn=function(t){return this.Pn.has(t)||this.Pn.set(t,new Set),this.Pn.get(t)},n}());export{R as Workbox,m as WorkboxEvent,j as messageSW};
